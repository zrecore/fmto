<!DOCTYPE html>
<html lang="en">
    <head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="icon" href="/test/img/favicon.ico" type="image/x-icon">
		<title>FMTO - lib/matrix.test</title>
		<link rel="stylesheet" type="text/css" href="/test/style.css" />
	</head>
	<body>
		<h1>lib/matrix</h1>
        <a href="/test/">Back to test index</a>
        <p id="matrix2D"></p>
        <p id="matrix3D"></p>
        <p id="matrix4D"></p>
        <p id="hasLinearAlgebra"></p>
        <p id="matrix3x3Add"></p>
        <p id="matrix4x4Add"></p>
        <p id="matrix3x3Subtract"></p>
        <p id="matrix4x4Subtract"></p>
        <p id="matrix3x3Scale"></p>
        <p id="matrix4x4Scale"></p>
		<script type="module">
			import {
                Core,
                LinearAlgebra,
                Matrix2D,
                Matrix3D,
                Matrix4D,
                MatrixND,
                Vector3D,
                Vector4D
            } from '/src/index.mjs'

			const core = new Core()
			
			const hasAdapter = await core.initializeAdapter()
			const hasDevice = await core.initializeDevice()

            const mat2x2 = new Matrix2D()
            const mat3x3 = new Matrix3D()
            const mat4x4 = new Matrix4D()
            
            document
                .getElementById('matrix2D')
                .textContent = mat2x2.toString()

            document
                .getElementById('matrix3D')
                .textContent = mat3x3.toString()
            
            document
                .getElementById('matrix4D')
                .textContent = mat4x4.toString()

            if (hasAdapter && hasDevice) {
				const linearAlgebra = new LinearAlgebra(
					core.device
				)
				if (linearAlgebra)
				{
					document.getElementById('hasLinearAlgebra').textContent = true
				}
				
                const mat3x3A = new Matrix3D(
                    new Vector3D(
                        1,
                        2,
                        3
                    ),
                    new Vector3D(
                        4,
                        5,
                        6
                    ),
                    new Vector3D(
                        7,
                        8,
                        9
                    )
                )

                const mat3x3B = new Matrix3D(
                    new Vector3D(
                        10,
                        20,
                        30
                    ),
                    new Vector3D(
                        40,
                        50,
                        60
                    ),
                    new Vector3D(
                        70,
                        80,
                        90
                    )
                )
                
				const resultMatrix3x3 = await linearAlgebra.matrixAdd(mat3x3A, mat3x3B)
                
                if (resultMatrix3x3)
                {
                    document
                        .getElementById('matrix3x3Add')
                        .textContent = resultMatrix3x3.toString()
                }

                const resultMatrix3x3Subtract = await linearAlgebra.matrixSubtract(mat3x3A, mat3x3B)
                if (resultMatrix3x3Subtract)
                {
                    document
                        .getElementById('matrix3x3Subtract')
                        .textContent = resultMatrix3x3Subtract.toString()
                }


                const mat4x4A = new Matrix4D(
                    new Vector4D(
                        1,
                        2,
                        3,
                        4
                    ),
                    new Vector4D(
                        5,
                        6,
                        7,
                        8
                    ),
                    new Vector4D(
                        9,
                        10,
                        11,
                        12
                    ),
                    new Vector4D(
                        13,
                        14,
                        15,
                        16
                    )
                )

                const mat4x4B = new Matrix4D(
                    new Vector4D(
                        10,
                        20,
                        30,
                        40
                    ),
                    new Vector4D(
                        50,
                        60,
                        70,
                        80
                    ),
                    new Vector4D(
                        90,
                        100,
                        110,
                        120
                    ),
                    new Vector4D(
                        130,
                        140,
                        150,
                        160
                    )
                )

                const resultMatrix4x4 = await linearAlgebra.matrixAdd(mat4x4A, mat4x4B)
                if (resultMatrix4x4)
                {
                    document
                        .getElementById('matrix4x4Add')
                        .textContent = resultMatrix4x4.toString()
                }

                const resultMatrix4x4Subtract = await linearAlgebra.matrixSubtract(mat4x4A, mat4x4B)
                if (resultMatrix4x4Subtract)
                {
                    document
                        .getElementById('matrix4x4Subtract')
                        .textContent = resultMatrix4x4Subtract.toString()
                }

                const resultMatrix3x3Scale = await linearAlgebra.matrixScale(mat3x3A, 2.0)
                if (resultMatrix3x3Scale)
                {
                    document
                        .getElementById('matrix3x3Scale')
                        .textContent = resultMatrix3x3Scale.toString()
                }

                const resultMatrix4x4Scale = await linearAlgebra.matrixScale(mat4x4A, 2.0)
                if (resultMatrix4x4Scale)
                {
                    document
                        .getElementById('matrix4x4Scale')
                        .textContent = resultMatrix4x4Scale.toString()
                }
			}

		</script>
	</body>
</html>